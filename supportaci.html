<!DOCTYPE html>
<html lang="it">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Supportaci - A.P.S. GRILLI IN TESTA</title>
	<link rel="stylesheet" href="styles.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
	<link href="https://fonts.googleapis.com/css2?family=El+Messiri:wght@400;500;600;700&display=swap" rel="stylesheet">
	<link rel="icon" href="assets/logo.svg" type="image/svg+xml">
</head>

<body>
	<header>
		<div w3-include-html="navbar.html"></div>
	</header>

	<main>
		<section class="page-header" style="background-color: rgba(44, 171, 102, 1); color: white; padding: 2rem;">
			<h1 style="color: white;">Supportaci</h1>
			<p>Unisciti alla nostra Associazione di Promozione Sociale e partecipa attivamente alle iniziative per il
				benessere psicosociale</p>
		</section>

		<section class="membership-benefits">
			<h2>Vantaggi</h2>
			<div class="benefits-container">
				<div class="benefit-card">
					<div class="benefit-icon">
						<i class="fas fa-gamepad"></i>
					</div>
					<h3>Accesso Prioritario agli Eventi</h3>
					<p>Prenotazione prioritaria per tutti i nostri eventi ludico-sportivi e workshop</p>
				</div>

				<div class="benefit-card">
					<div class="benefit-icon">
						<i class="fas fa-chalkboard-teacher"></i>
					</div>
					<h3>Workshop Esclusivi</h3>
					<p>Partecipazione a workshop speciali riservati ai soci su tematiche psicosociali</p>
				</div>

				<div class="benefit-card">
					<div class="benefit-icon">
						<i class="fas fa-users"></i>
					</div>
					<h3>Comunità</h3>
					<p>Fai parte di una comunità che condivide la passione per il benessere psicosociale attraverso il
						gioco</p>
				</div>
			</div>
		</section>

		<section class="membership-types">
			<h2>Tipologie di Supporto</h2>
			<div class="membership-options">
				<div class="membership-option">
					<h3>Donazione</h3>
					<div class="price">Libera</div>
					<ul>
						<li>Contributo libero per sostenere le nostre attività</li>
						<li>Riceverai una ricevuta per la tua donazione</li>
					</ul>
					<div class="donation-info">
						Per donare, effettua un bonifico all'IBAN:<br>
						<strong>IT12A0123456789000123456789</strong>
					</div>
				</div>

				<div class="membership-option featured">
					<div class="popular-tag">Più popolare</div>
					<h3>Membro Associato</h3>
					<div class="price">10€/anno</div>
					<ul>
						<li>Accesso a tutti gli eventi</li>
						<li>Sconti su eventi speciali</li>
						<li>Possibilità di partecipare a eventi esclusivi per soci</li>
						<li>Partecipazione attiva alle attività dell'associazione</li>

					</ul>
					<a href="#form" class="cta">Iscriviti</a>
				</div>

			</div>
		</section>

		<section class="member-testimonials">
			<h2>Le Voci dei Nostri Associati</h2>
			<div class="testimonial-slider">
				<div class="testimonial-container">
					<div id="testimonial-track">
						<!-- Testimonianze originali -->
						<div class="testimonial">
							<div class="quote">
								<i class="fas fa-quote-left"></i>
								<p>Far parte di SanGiò è stata una delle migliori decisioni della mia vita. Ho
									partecipato a
									laboratori incredibili che mi hanno aiutato a migliorare le mie relazioni sociali.
								</p>
								<i class="fas fa-quote-right"></i>
							</div>
							<div class="author">- Marco L., associato dal 2019</div>
						</div>

						<div class="testimonial">
							<div class="quote">
								<i class="fas fa-quote-left"></i>
								<p>Gli eventi e i laboratori organizzati dall'associazione sono sempre stimolanti e mi
									permettono di esplorare nuovi aspetti della mia personalità in un ambiente sicuro e
									inclusivo.</p>
								<i class="fas fa-quote-right"></i>
							</div>
							<div class="author">- Lucia G., associata dal 2021</div>
						</div>

						<div class="testimonial">
							<div class="quote">
								<i class="fas fa-quote-left"></i>
								<p>Le attività di SanGiò hanno un impatto reale nella comunità. Sono orgoglioso di
									essere parte
									di un'associazione che promuove il benessere e l'inclusione sociale in modo così
									innovativo.</p>
								<i class="fas fa-quote-right"></i>
							</div>
							<div class="author">- Alessandro B., associato dal 2020</div>
						</div>

						<div class="testimonial">
							<div class="quote">
								<i class="fas fa-quote-left"></i>
								<p>Da quando mi sono iscritto, ho scoperto un gruppo di persone fantastiche che
									condividono i miei stessi
									valori. SanGiò è diventata come una seconda famiglia per me.</p>
								<i class="fas fa-quote-right"></i>
							</div>
							<div class="author">- Francesca M., associata dal 2022</div>
						</div>

						<!-- Duplicazione delle testimonianze per l'effetto di scorrimento infinito -->
						<div class="testimonial">
							<div class="quote">
								<i class="fas fa-quote-left"></i>
								<p>Far parte di SanGiò è stata una delle migliori decisioni della mia vita. Ho
									partecipato a
									laboratori incredibili che mi hanno aiutato a migliorare le mie relazioni sociali.
								</p>
								<i class="fas fa-quote-right"></i>
							</div>
							<div class="author">- Marco L., associato dal 2019</div>
						</div>

						<div class="testimonial">
							<div class="quote">
								<i class="fas fa-quote-left"></i>
								<p>Gli eventi e i laboratori organizzati dall'associazione sono sempre stimolanti e mi
									permettono di esplorare nuovi aspetti della mia personalità in un ambiente sicuro e
									inclusivo.</p>
								<i class="fas fa-quote-right"></i>
							</div>
							<div class="author">- Lucia G., associata dal 2021</div>
						</div>

						<div class="testimonial">
							<div class="quote">
								<i class="fas fa-quote-left"></i>
								<p>Le attività di SanGiò hanno un impatto reale nella comunità. Sono orgoglioso di
									essere parte
									di un'associazione che promuove il benessere e l'inclusione sociale in modo così
									innovativo.</p>
								<i class="fas fa-quote-right"></i>
							</div>
							<div class="author">- Alessandro B., associato dal 2020</div>
						</div>

						<div class="testimonial">
							<div class="quote">
								<i class="fas fa-quote-left"></i>
								<p>Da quando mi sono iscritto, ho scoperto un gruppo di persone fantastiche che
									condividono i miei stessi
									valori. SanGiò è diventata come una seconda famiglia per me.</p>
								<i class="fas fa-quote-right"></i>
							</div>
							<div class="author">- Francesca M., associata dal 2022</div>
						</div>
					</div>
				</div>
			</div>
		</section>

		<section id="form" class="membership-form">
			<h2>Modulo di Iscrizione</h2>
			<p>Compila il modulo sottostante per richiedere l'iscrizione. Ti contatteremo al più presto con le
				istruzioni per completare la procedura.</p>

			<form id="membership-form" class="contact-form">
				<div class="form-group">
					<label for="nome">Nome*</label>
					<input type="text" id="nome" name="nome" required>
				</div>

				<div class="form-group">
					<label for="cognome">Cognome*</label>
					<input type="text" id="cognome" name="cognome" required>
				</div>

				<div class="form-group">
					<label for="email">Email*</label>
					<input type="email" id="email" name="email" required>
				</div>

				<div class="form-group">
					<label for="telefono">Telefono</label>
					<input type="tel" id="telefono" name="telefono">
				</div>

				<div class="form-group">
					<label for="interessi">Interessi Principali</label>
					<select id="interessi" name="interessi">
						<option value="">Seleziona i tuoi interessi</option>
						<option value="ludico-sportivo">Attività Ludico-Sportive</option>
						<option value="psicologia">Workshop di Psicologia</option>
						<option value="bambini">Attività per Bambini</option>
						<option value="altro">Altro</option>
					</select>
				</div>

				<div class="form-group">
					<label for="messaggio">Note aggiuntive</label>
					<textarea id="messaggio" name="messaggio" rows="4"></textarea>
				</div>

				<div class="form-group checkbox">
					<input type="checkbox" id="privacy" name="privacy" required>
					<label for="privacy">Acconsento al trattamento dei dati personali secondo la normativa
						vigente*</label>
				</div>

				<button type="submit" class="cta">Invia Richiesta</button>
				<p class="form-note">* Campi obbligatori</p>
			</form>
		</section>

		<section class="cta-section">
			<h2>Hai domande?</h2>
			<p>Contattaci per maggiori informazioni sul tesseramento e sulle attività dell'associazione</p>
			<a href="contatti.html" class="cta">Contattaci</a>
		</section>
	</main>

	<footer>
		<div class="footer-container">
			<div class="footer-section">
				<img src="assets/logo.svg" alt="A.P.S. GRILLI IN TESTA Logo" class="footer-logo">
				<p>Associazione di Promozione Sociale dedicata al benessere psicofisico e all'educazione attraverso il
					gioco.</p>
			</div>
			<div class="footer-section">
				<h4>Collegamenti Rapidi</h4>
				<ul class="footer-links">
					<li><a href="index.html">Home</a></li>
					<li><a href="chi-siamo.html">Chi Siamo</a></li>
					<li><a href="eventi.html">Eventi</a></li>
					<li><a href="news.html">News</a></li>
					<li><a href="supportaci.html">Supportaci</a></li>
				</ul>
			</div>
			<div class="footer-section">
				<h4>Contatti</h4>
				<p><i class="fas fa-envelope"></i> info@grilliintesta.it</p>
				<p><i class="fas fa-phone"></i> +39 123 456 7890</p>
				<p><i class="fas fa-map-marker-alt"></i> Via Roma 123, Milano</p>
			</div>
			<div class="footer-section">
				<h4>Seguici</h4>
				<div class="social-icons">
					<a href="https://instagram.com/grilli.intesta" target="_blank" aria-label="Instagram">
						<i class="fab fa-instagram"></i>
						<span class="social-handle">@grilli.intesta</span>
					</a>
				</div>
			</div>
		</div>
		<div class="footer-bottom">
			<p>&copy; 2025 A.P.S. GRILLI IN TESTA | <a href="privacy-policy.html">Privacy Policy</a>
		</div>
	</footer>

	<script src="script.js"></script>
	<script>
		// Direct form handler - runs immediately after script.js is loaded
		document.addEventListener('DOMContentLoaded', function () {
			console.log('Direct form handler: DOM content loaded');

			// Try to get the form directly
			const membershipForm = document.getElementById('membership-form');
			if (membershipForm) {
				console.log('Direct form handler: Form found, attaching event listener');

				membershipForm.addEventListener('submit', function (e) {
					console.log('Direct form handler: Form submit triggered!');
					e.preventDefault();

					// Remove any existing success or error messages
					const existingMessages = membershipForm.querySelectorAll('.submission-success, .submission-error');
					existingMessages.forEach(message => message.remove());

					// Create loading indicator
					const submitButton = this.querySelector('button[type="submit"]');
					const originalButtonText = submitButton.textContent;
					submitButton.textContent = 'Invio in corso...';
					submitButton.disabled = true;

					// Collect form data
					const formData = new FormData(this);

					// Convert FormData to JSON object
					const formDataObj = {};
					formData.forEach((value, key) => {
						// Convert checkbox "on" value to boolean true
						if (key === 'privacy' && value === 'on') {
							formDataObj[key] = true;
						} else {
							formDataObj[key] = value;
						}
						console.log(`Form field: ${key} = ${formDataObj[key]}`);
					});

					console.log('Sending form data to API:', formDataObj);

					// Create and log the raw JSON body
					const jsonBody = JSON.stringify({ data: formDataObj });
					console.log('Raw JSON body being sent:', jsonBody);

					// Send POST request to backend
					fetch('http://localhost:1337/api/memberships', {
						method: 'POST',
						headers: {
							'Content-Type': 'application/json',
							'Accept': 'application/json'
						},
						body: jsonBody,
						mode: 'cors',
						credentials: 'same-origin',
						redirect: 'follow'
					})
						.then(response => {
							console.log('API response received:', response);

							// Check if response is not OK - log the full error response
							if (!response.ok) {
								// Clone the response to read it twice
								return response.json().then(errorData => {
									console.error('Full API error response:', errorData);
									throw new Error('Errore di rete o del server');
								});
							}
							return response.json();
						})
						.then(result => {
							console.log('API success result:', result);
							// Show success message
							membershipForm.innerHTML = `
							<div class="submission-success">
							<i class="fas fa-check-circle"></i>
							<h3>Richiesta inviata con successo!</h3>
							<p>Grazie per il tuo interesse nell'associazione! Ti contatteremo presto per completare il processo di registrazione.</p>
							</div>
						`;

							// Scroll to success message
							membershipForm.scrollIntoView({ behavior: 'smooth' });
						})
						.catch(error => {
							console.error('Error submitting form:', error);

							// Reset button
							submitButton.textContent = originalButtonText;
							submitButton.disabled = false;

							// Create error message
							const errorDiv = document.createElement('div');
							errorDiv.className = 'submission-error';
							errorDiv.innerHTML = `
							<i class="fas fa-exclamation-circle"></i>
							<p>Si è verificato un errore nell'invio del modulo. Per favore riprova più tardi o contattaci direttamente via email.</p>
						`;

							// Add to the top of the form (after removing any existing error messages)
							membershipForm.prepend(errorDiv);

							// Scroll to error message
							errorDiv.scrollIntoView({ behavior: 'smooth' });
						});
				});
			} else {
				console.error('Direct form handler: Form with ID "membership-form" not found!');
			}
		});
	</script>
</body>

</html>